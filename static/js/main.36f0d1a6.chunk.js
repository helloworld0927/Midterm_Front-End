(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{38:function(t,e,a){},39:function(t,e,a){},46:function(t,e,a){},47:function(t,e,a){},48:function(t,e,a){},49:function(t,e,a){},50:function(t,e,a){},59:function(t,e,a){},60:function(t,e,a){},61:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a(0),i=a.n(r),c=a(17),d=a.n(c),s=a(5),l=a(6),o=a(8),u=a(7),p=(a(38),a(39),a(9)),j=a(15),b=a(3),h=a(4),O=a.n(h),v=a(14),g=(a(46),a(47),a(48),a(21)),f=(a(49),function(t){var e=t.handleSave,a=t.saveLabel,r=t.handleDelete,i=t.handleCancel;return Object(n.jsxs)("div",{className:"Edit-Buttons",children:[Object(n.jsx)("div",{tabIndex:"0",className:"Edit-Button",style:{backgroundColor:"#5aac44"},onClick:e,children:a}),r&&Object(n.jsx)("div",{tabIndex:"0",className:"Edit-Button",style:{backgroundColor:"#ff5c5c",marginLeft:0},onClick:r,children:"Delete"}),Object(n.jsx)("div",{tabIndex:"0",className:"Edit-Button-Cancel",onClick:i,children:Object(n.jsx)("ion-icon",{name:"close"})})]})}),x=function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={text:t.props.text||""},t.handleChangeText=function(e){return t.setState({text:e.target.value})},t.onEnter=function(e){var a=t.state.text;13===e.keyCode&&(e.preventDefault(),t.props.onSave(a))},t}return Object(l.a)(a,[{key:"render",value:function(){var t=this.state.text,e=this.props,a=e.onSave,r=e.onCancel,i=e.onDelete,c=e.adding;return Object(n.jsxs)("div",{className:"Edit-Card",children:[Object(n.jsx)("div",{className:"Card",children:Object(n.jsx)(g.a,{autoFocus:!0,className:"Edit-Card-Textarea",placeholder:"Enter text...",value:t,onChange:this.handleChangeText,onKeyDown:this.onEnter})}),Object(n.jsx)(f,{handleSave:function(){return a(t)},saveLabel:c?"Add card":"Save",handleDelete:i,handleCancel:r})]})}}]),a}(r.Component),y=function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={hover:!1,editing:!1},t.startHover=function(){return t.setState({hover:!0})},t.endHover=function(){return t.setState({hover:!1})},t.startEditing=function(){return t.setState({hover:!1,editing:!0,text:t.props.card.text})},t.endEditing=function(){return t.setState({hover:!1,editing:!1})},t.editCard=function(){var e=Object(v.a)(O.a.mark((function e(a){var n,r,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.props,r=n.card,i=n.dispatch,t.endEditing(),i({type:"CHANGE_CARD_TEXT",payload:{cardId:r._id,cardText:a}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.deleteCard=Object(v.a)(O.a.mark((function e(){var a,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.props,n=a.listId,r=a.card,(0,a.dispatch)({type:"DELETE_CARD",payload:{cardId:r._id,listId:n}});case 2:case"end":return e.stop()}}),e)}))),t}return Object(l.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.card,r=e.index,i=this.state,c=i.hover;return i.editing?Object(n.jsx)(x,{text:a.text,onSave:this.editCard,onDelete:this.deleteCard,onCancel:this.endEditing}):Object(n.jsx)(j.b,{draggableId:a._id,index:r,children:function(e,r){return Object(n.jsxs)("div",Object(b.a)(Object(b.a)(Object(b.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{className:"Card",onMouseEnter:t.startHover,onMouseLeave:t.endHover,children:[c&&Object(n.jsx)("div",{className:"Card-Icons",children:Object(n.jsx)("div",{className:"Card-Icon",onClick:t.startEditing,children:Object(n.jsx)("ion-icon",{name:"create"})})}),a.text]}))}})}}]),a}(r.Component),C=Object(p.b)((function(t,e){return{card:t.cardsById[e.cardId]}}))(y),I=(a(50),function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).ref=i.a.createRef(),t.onEnter=function(e){13===e.keyCode&&(e.preventDefault(),t.props.saveList())},t.handleClick=function(e){t.ref.current.contains(e.target)||t.props.onClickOutside()},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!1)}},{key:"render",value:function(){var t=this.props,e=t.title,a=t.handleChangeTitle,r=t.deleteList;return Object(n.jsxs)("div",{className:"List-Title-Edit",ref:this.ref,children:[Object(n.jsx)(g.a,{autoFocus:!0,className:"List-Title-Textarea",placeholder:"Enter list title...",value:e,onChange:a,onKeyDown:this.onEnter,style:{width:r?220:245}}),r&&Object(n.jsx)("ion-icon",{name:"trash",onClick:r})]})}}]),a}(r.Component)),L=a(12),T=a.n(L),m=function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={editingTitle:!1,title:t.props.list.title,addingCard:!1},t.toggleAddingCard=function(){return t.setState({addingCard:!t.state.addingCard})},t.addCard=function(){var e=Object(v.a)(O.a.mark((function e(a){var n,r,i,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.props,r=n.listId,i=n.dispatch,t.toggleAddingCard(),c=T.a.generate(),i({type:"ADD_CARD",payload:{cardText:a,cardId:c,listId:r}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.toggleEditingTitle=function(){return t.setState({editingTitle:!t.state.editingTitle})},t.handleChangeTitle=function(e){return t.setState({title:e.target.value})},t.editListTitle=Object(v.a)(O.a.mark((function e(){var a,n,r,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.props,n=a.listId,r=a.dispatch,i=t.state.title,t.toggleEditingTitle(),r({type:"CHANGE_LIST_TITLE",payload:{listId:n,listTitle:i}});case 4:case"end":return e.stop()}}),e)}))),t.deleteList=Object(v.a)(O.a.mark((function e(){var a,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.props,n=a.listId,r=a.list,(0,a.dispatch)({type:"DELETE_LIST",payload:{listId:n,cards:r.cards}});case 2:case"end":return e.stop()}}),e)}))),t}return Object(l.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.list,r=e.index,i=this.state,c=i.editingTitle,d=i.addingCard,s=i.title;return Object(n.jsx)(j.b,{draggableId:a._id,index:r,children:function(e,r){return Object(n.jsxs)("div",Object(b.a)(Object(b.a)(Object(b.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{className:"List",children:[c?Object(n.jsx)(I,{list:a,title:s,handleChangeTitle:t.handleChangeTitle,saveList:t.editListTitle,onClickOutside:t.editListTitle,deleteList:t.deleteList}):Object(n.jsx)("div",{className:"List-Title",onClick:t.toggleEditingTitle,children:a.title}),Object(n.jsx)(j.c,{droppableId:a._id,children:function(t,e){return Object(n.jsxs)("div",{ref:t.innerRef,children:[a.cards&&a.cards.map((function(t,e){return Object(n.jsx)(C,{cardId:t,index:e,listId:a._id},t)})),t.placeholder]})}}),d?Object(n.jsx)(x,{onSave:t.addCard,onCancel:t.toggleAddingCard,adding:!0}):Object(n.jsxs)("div",{className:"Toggle-Add-Card",onClick:t.toggleAddingCard,children:[Object(n.jsx)("ion-icon",{name:"add"})," Add a card"]})]}))}})}}]),a}(r.Component),E=Object(p.b)((function(t,e){return{list:t.listsById[e.listId]}}))(m),A=(a(59),function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={title:""},t.handleChangeTitle=function(e){return t.setState({title:e.target.value})},t.createList=Object(v.a)(O.a.mark((function e(){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("click1"),a=t.state.title,n=t.props.dispatch,t.props.toggleAddingList(),n({type:"ADD_LIST",payload:{listId:T.a.generate(),listTitle:a}});case 5:case"end":return e.stop()}}),e)}))),t}return Object(l.a)(a,[{key:"render",value:function(){var t=this.props.toggleAddingList,e=this.state.title;return Object(n.jsxs)("div",{className:"Add-List-Editor",children:[Object(n.jsx)(I,{title:e,handleChangeTitle:this.handleChangeTitle,onClickOutside:t,saveList:this.createList}),Object(n.jsx)(f,{handleSave:this.createList,saveLabel:"Add list",handleCancel:t})]})}}]),a}(r.Component)),D=Object(p.b)()(A),k=function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={addingList:!1},t.toggleAddingList=function(){return t.setState({addingList:!t.state.addingList})},t.handleDragEnd=function(e){var a=e.source,n=e.destination,r=e.type;if(n){var i=t.props.dispatch;"COLUMN"!==r?a.index===n.index&&a.droppableId===n.droppableId||i({type:"MOVE_CARD",payload:{sourceListId:a.droppableId,destListId:n.droppableId,oldCardIndex:a.index,newCardIndex:n.index}}):a.index!==n.index&&i({type:"MOVE_LIST",payload:{oldListIndex:a.index,newListIndex:n.index}})}},t}return Object(l.a)(a,[{key:"render",value:function(){var t=this,e=this.props.board,a=this.state.addingList;return Object(n.jsx)(j.a,{onDragEnd:this.handleDragEnd,children:Object(n.jsx)(j.c,{droppableId:"board",direction:"horizontal",type:"COLUMN",children:function(r,i){return Object(n.jsxs)("div",{className:"Board",ref:r.innerRef,children:[e.lists.map((function(t,e){return Object(n.jsx)(E,{listId:t,index:e},t)})),r.placeholder,Object(n.jsx)("div",{className:"Add-List",children:a?Object(n.jsx)(D,{toggleAddingList:t.toggleAddingList}):Object(n.jsxs)("div",{onClick:t.toggleAddingList,className:"Add-List-Button",children:[Object(n.jsx)("ion-icon",{name:"add"})," Add a list..."]})})]})}})})}}]),a}(r.Component),S=Object(p.b)((function(t){return{board:t.board}}))(k),_=function(t){Object(o.a)(a,t);var e=Object(u.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("div",{className:"Header",children:"\u5c71\u5be8 Trello"}),Object(n.jsx)(S,{})]})}}]),a}(r.Component),w=a(28),N=a(29),R=a(10),B=a(22),H=a(27),M=a(11),G=a(32),J=a.n(G),P=Object(M.c)({board:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lists:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_LIST":var a=e.payload.listId;return{lists:[].concat(Object(H.a)(t.lists),[a])};case"MOVE_LIST":var n=e.payload,r=n.oldListIndex,i=n.newListIndex,c=Array.from(t.lists),d=c.splice(r,1),s=Object(B.a)(d,1),l=s[0];return c.splice(i,0,l),{lists:c};case"DELETE_LIST":var o=e.payload.listId,u=function(t){return t!==o},p=t.lists.filter(u);return{lists:p};default:return t}},listsById:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_LIST":var a=e.payload,n=a.listId,r=a.listTitle;return Object(b.a)(Object(b.a)({},t),{},Object(R.a)({},n,{_id:n,title:r,cards:[]}));case"CHANGE_LIST_TITLE":var i=e.payload,c=i.listId,d=i.listTitle;return Object(b.a)(Object(b.a)({},t),{},Object(R.a)({},c,Object(b.a)(Object(b.a)({},t[c]),{},{title:d})));case"DELETE_LIST":var s=e.payload.listId,l=(t[s],Object(w.a)(t,[s].map(N.a)));return l;case"ADD_CARD":var o=e.payload,u=o.listId,p=o.cardId;return Object(b.a)(Object(b.a)({},t),{},Object(R.a)({},u,Object(b.a)(Object(b.a)({},t[u]),{},{cards:[].concat(Object(H.a)(t[u].cards),[p])})));case"MOVE_CARD":var j,h=e.payload,O=h.oldCardIndex,v=h.newCardIndex,g=h.sourceListId,f=h.destListId;if(g===f){var x=Array.from(t[g].cards),y=x.splice(O,1),C=Object(B.a)(y,1),I=C[0];return x.splice(v,0,I),Object(b.a)(Object(b.a)({},t),{},Object(R.a)({},g,Object(b.a)(Object(b.a)({},t[g]),{},{cards:x})))}var L=Array.from(t[g].cards),T=L.splice(O,1),m=Object(B.a)(T,1),E=m[0],A=Array.from(t[f].cards);return A.splice(v,0,E),Object(b.a)(Object(b.a)({},t),{},(j={},Object(R.a)(j,g,Object(b.a)(Object(b.a)({},t[g]),{},{cards:L})),Object(R.a)(j,f,Object(b.a)(Object(b.a)({},t[f]),{},{cards:A})),j));case"DELETE_CARD":var D=e.payload,k=D.cardId,S=D.listId,_=function(t){return t!==k};return Object(b.a)(Object(b.a)({},t),{},Object(R.a)({},S,Object(b.a)(Object(b.a)({},t[S]),{},{cards:t[S].cards.filter(_)})));default:return t}},cardsById:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_CARD":var a=e.payload,n=a.cardText,r=a.cardId;return Object(b.a)(Object(b.a)({},t),{},Object(R.a)({},r,{text:n,_id:r}));case"CHANGE_CARD_TEXT":var i=e.payload,c=i.cardText,d=i.cardId;return Object(b.a)(Object(b.a)({},t),{},Object(R.a)({},d,Object(b.a)(Object(b.a)({},t[d]),{},{text:c})));case"DELETE_CARD":var s=e.payload.cardId,l=(t[s],Object(w.a)(t,[s].map(N.a)));return l;case"DELETE_LIST":var o=e.payload.cards;return Object.keys(t).filter((function(t){return!o.includes(t)})).reduce((function(e,a){return Object(b.a)(Object(b.a)({},e),{},Object(R.a)({},a,t[a]))}),{});default:return t}}}),V=function(){try{var t=localStorage.getItem("state");if(null===t)return;return JSON.parse(t)}catch(e){return}}(),U=Object(M.e)(P,V);U.subscribe(J()((function(){!function(t){try{var e=JSON.stringify(t);localStorage.setItem("state",e)}catch(a){}}(U.getState())}),1e3)),console.log(U.getState()),U.getState().board.lists.length||(console.log("SEED"),function(t){console.log("Insert first list");var e=T.a.generate();t.dispatch({type:"ADD_LIST",payload:{listId:e,listTitle:"List 1"}}),t.dispatch({type:"ADD_CARD",payload:{listId:e,cardId:T.a.generate(),cardText:"Card 1"}}),t.dispatch({type:"ADD_CARD",payload:{listId:e,cardId:T.a.generate(),cardText:"Card 2"}}),console.log("Insert second list");var a=T.a.generate();t.dispatch({type:"ADD_LIST",payload:{listId:a,listTitle:"List 2"}}),t.dispatch({type:"ADD_CARD",payload:{listId:a,cardId:T.a.generate(),cardText:"Card 1"}}),t.dispatch({type:"ADD_CARD",payload:{listId:a,cardId:T.a.generate(),cardText:"Card 2"}})}(U));var W=U;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(60);var F=document.getElementById("root");d.a.render(Object(n.jsx)(p.a,{store:W,children:Object(n.jsx)(_,{})}),F),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[61,1,2]]]);
//# sourceMappingURL=main.36f0d1a6.chunk.js.map